<head>
    <title>permits</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <style type="text/css">
            html, body, #map-canvas { height: 100%; margin: 0; padding: 0;}
    </style>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!--    <script>
        var config = {message: "Auto generated post"};
    </script>
-->

    
</head>
<body>
    <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=109055546115993";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
    <script>
/*    function showFeed() {
        // Todo:
        //    1. Get admin's account info, use page key to post to the feed
        //    2. Get this into the js file!
        //
            var feedHtml = FB.api('/914491901967402/feed','post',
                                  {message: 'Autoposted from app'},
                                  function(response) {
                if (!response || response.error) {
                    alert('Error occured: ' + response.error);
                    feedHtml = "Error occurred: " + response.error.message;
                    console.log("fbFeed error: " + feedHtml);
                } else {
                    alert('Post ID: ' + response.id);
                }
                });
        $("#fbFeed").html("new value");
//        console.log("fbFeed = " + feedHtml.toString());
    };
    */
    </script>

<!--
    <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    var patt = new RegExp("localhost");
    curAppId = (patt.test(location.href)) ? '109055546115993':'1459289887712466';
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.4&appId="+curAppId;
    fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));</script>
-->
    
    <header>
        <img src="/img/boulderLogo.png" alt="City of Boulder">
        {{> loginButtons align="right"}}
        <h1>Boulder Permit Access</h1>
        {{> fbbtn}}
        &nbsp;
    </header>

  {{> thumbnail}}
<!-- is the map load causing the no route problem? no! -->
{{> map}} 
</body>

<template name="thumbnail">
    <div>
        <div id="nav">
            <input type="submit" name="close" value="x" id="close" alt="close" /><br>
        </div>
        <div id="selDetails">
        </div>
        <div id="discuss">
            <div class="fb-comments" data-href="https://www.facebook.com/boulderc3po/" data-width="300" data-numposts="2">
            </div>
        </div>
    </div>
</template>

<template name="map">
    <div class="map-container" id="map-canvas">
        
        {{#unless geolocationError}}
            {{> googleMap name="map" options=mapOptions}}
        {{else}}
            Geolocation failed: {{geolocationError}}
            {{> googleMap name="map" options=mapOptions}}
        {{/unless}}
        <p>map div in template map</p>
    </div>

</template>

<template name="fbbtn">
    <div class="fb-like"
         data-href="tbd"
         data-layout="standard"
         data-action="like"
         data-show-faces="true"
         data-share="true">
    </div>
</template>
